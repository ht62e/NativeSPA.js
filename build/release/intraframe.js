!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var i,o,r=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{l(i.next(t))}catch(t){r(t)}}function a(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):new n((function(e){e(t.value)})).then(s,a)}l((i=i.apply(t,e||[])).next())}))},s=function(t,e){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},a=function(){function t(){this.version="",this.msIeMode=!1,this.cache=new Map;var t=window.navigator.userAgent.toLowerCase();-1==t.indexOf("msie")&&-1==t.indexOf("trident")||(this.msIeMode=!0)}return t.getInstance=function(){return t.instance},t.prototype.setSourceVersion=function(t){this.version=t},t.prototype.preload=function(t){return r(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.fetch(t)];case 1:return e.sent(),[2,!0]}}))}))},t.prototype.fetch=function(t,e){return void 0===e&&(e=!1),r(this,void 0,void 0,(function(){var n=this;return s(this,(function(i){return!e&&this.cache.has(t)?[2,this.cache.get(t)]:[2,new Promise((function(e,i){var o,r=new XMLHttpRequest;r.onreadystatechange=function(){if(4===r.readyState){var o=!1;if(n.msIeMode||(o=r.responseURL.indexOf("file:///")>-1&&null!==r.responseText),200===r.status||o){var s=r.responseText;n.cache.set(t,s),e(s)}else i(r.statusText)}},o=""===n.version||"debug"===n.version.toLocaleLowerCase()?Date.now().toString():n.version,r.open("GET",t+"?ver="+o,!0),r.send(null)}))]}))}))},t.instance=new t,t}(),l=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{l(i.next(t))}catch(t){r(t)}}function a(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):new n((function(e){e(t.value)})).then(s,a)}l((i=i.apply(t,e||[])).next())}))},c=function(t,e){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},u=function(){function t(t,e,n){this.name=t,this.sourceUri=e,this.moduleIndex=n,this.isFetched=!1,this.isMounted=!1,this.isInitialized=!1,this.subContainerInfos=new Map,this.caption="",this.htmlAdapter=null,this.onCreate()}return t.prototype.setCaption=function(t){this.caption=t},t.prototype.subContainerNavigationEventHandler=function(t,e,n){return this.htmlAdapter.triggerOnSubContainerNavigated(t,e,n)},t.prototype.dispatchResizeEvent=function(){this.wrapperElement&&this.subContainerInfos.forEach((function(t){t.container.onResize()}))},t.prototype.fetch=function(){return l(this,void 0,void 0,(function(){var t,e;return c(this,(function(n){switch(n.label){case 0:return t=a.getInstance(),e=this,[4,t.fetch(this.sourceUri)];case 1:return e.source=n.sent(),this.loadSubContainerInfos(),this.isFetched=!0,[2,null]}}))}))},t.prototype.initialize=function(t){this.subContainerInfos.forEach((function(e){e.container.initialize(t)})),this.htmlAdapter.triggerOnInitialize(t)},t.prototype.show=function(t){this.cssTransitionDriver?this.cssTransitionDriver.show(t):(this.wrapperElement.style.display="",this.wrapperElement.style.visibility=""),this.htmlAdapter.triggerOnShow(!1,null),this.subContainerInfos.forEach((function(t){t.container.onShow()}))},t.prototype.hide=function(t){this.cssTransitionDriver?this.cssTransitionDriver.hide(t):"hidden"!==this.wrapperElement.style.visibility&&(this.wrapperElement.style.display="none"),this.htmlAdapter.triggerOnHide(null)},t.prototype.waitForExit=function(){var t=this;return new Promise((function(e){t.exitForWaitResolver=e}))},t.prototype.exit=function(t){return l(this,void 0,void 0,(function(){var e=this;return c(this,(function(n){return[2,new Promise((function(n){e.exitResolver=n,e.htmlAdapter.triggerOnExit(t)}))]}))}))},t.prototype.continueExitProcess=function(t){this.exitResolver&&(this.exitResolver(!0),this.exitResolver=null),this.exitForWaitResolver&&(this.exitForWaitResolver(t),this.exitForWaitResolver=null)},t.prototype.cancelExitProcess=function(){this.exitResolver&&(this.exitResolver(!1),this.exitResolver=null)},t.prototype.passMessage=function(t,e){return l(this,void 0,void 0,(function(){var n=this;return c(this,(function(i){return[2,new Promise((function(i){n.passMessageResolver=i,n.htmlAdapter.triggerOnReceiveMessage(t,e)}))]}))}))},t.prototype.returnMessageResponse=function(t){this.passMessage&&(this.passMessageResolver(t),this.passMessageResolver=null)},t.prototype.getElement=function(){throw this.wrapperElement},t.prototype.getOwnerContainer=function(){return this.currentContainer},t.prototype.getSubContainerNames=function(){var t=new Array;return this.subContainerInfos.forEach((function(e){t.push(e.name)})),t},t.prototype.getName=function(){return this.name},t.prototype.getCaption=function(){return this.caption},t.prototype.extractTemplateContent=function(t){return""},t}(),h=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),d=function(t){function e(e){var n=t.call(this)||this;return n.message=e,n}return h(e,t),e}(Error),p=function(){function t(t,e,n,i){this.mountedModules=new Map,this.moduleChangeHistory=new Array,this.inBackProcess=!1,this.containerParcel=null,this.containerResult=null,this.id=t,this.bindDomElement=e,this.owner=n,this.cssTransitionOptions=i,this.bindDomElement.style.position="relative",this.bindDomElement.classList.add("itm_container")}return t.prototype.triggerSubContainerNavigationEvent=function(){this.owner&&this.owner.getOwnerContainer().subContainerNavigationEventHandler(this,this.activeModule)},t.prototype.getId=function(){return this.id},t.prototype.getElement=function(){return this.bindDomElement},t.prototype.getOwner=function(){return this.owner},t.prototype.getActiveModule=function(){return this.activeModule},t.prototype.setDefaultModule=function(t){this.defaultModule=t},t.prototype.getContainerResult=function(){return this.containerResult},t.prototype.setContainerResult=function(t){this.containerResult=t},t.prototype.getModuleChangeHistory=function(){return this.moduleChangeHistory},t.prototype.onShow=function(){},t.prototype.onResize=function(){this.mountedModules.forEach((function(t){t.dispatchResizeEvent()}))},t.prototype.subContainerNavigationEventHandler=function(t,e){if(this.activeModule){var n={moduleName:e.getName(),caption:e.getCaption()},i=new Array;t.getModuleChangeHistory().forEach((function(t){i.push({moduleName:t.getName(),caption:t.getCaption()})})),!1!==this.activeModule.subContainerNavigationEventHandler(t.getId(),n,i)&&this.triggerSubContainerNavigationEvent()}},t}();!function(t){t[t.READONLY=0]="READONLY",t[t.NEW=1]="NEW",t[t.NEW_EDIT=2]="NEW_EDIT",t[t.EDIT=3]="EDIT"}(o||(o={}));var f,y=function(t,e,n){this.actionType=t,this.isChanged=e,this.result=n};!function(t){t[t.OK=0]="OK",t[t.CANCEL=1]="CANCEL",t[t.BACK=2]="BACK",t[t.FORCE_CANCEL=3]="FORCE_CANCEL",t[t.YES=4]="YES",t[t.NO=5]="NO"}(f||(f={}));var v,m=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),w=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{l(i.next(t))}catch(t){r(t)}}function a(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):new n((function(e){e(t.value)})).then(s,a)}l((i=i.apply(t,e||[])).next())}))},g=function(t,e){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},E=function(t){function e(e,n,i,o){var r=t.call(this,e,n,i,o)||this;return n.classList.add("itm_page_container"),r}return m(e,t),e.prototype.addModule=function(t){return w(this,void 0,void 0,(function(){var e=this;return g(this,(function(n){switch(n.label){case 0:return this.mountedModules.set(t.getName(),t),[4,t.mount((function(t){return e.bindDomElement.appendChild(t),e}),this.cssTransitionOptions)];case 1:return n.sent(),[2,!0]}}))}))},e.prototype.initialize=function(t){this.moduleChangeHistory=new Array,this.hideAllModules(),this.defaultModule&&this.forward(this.defaultModule,t,!0)},e.prototype.forward=function(t,e,n){return w(this,void 0,void 0,(function(){var i;return g(this,(function(o){switch(o.label){case 0:return-1!==this.moduleChangeHistory.indexOf(t)?[2]:(this.moduleChangeHistory.push(t),[4,this.initializeModule(t,e)]);case 1:return o.sent(),this.activateModule(t,n),[4,t.waitForExit()];case 2:return i=o.sent(),this.inBackProcess||this.showPreviousModule(),this.inBackProcess=!1,[2,i]}}))}))},e.prototype.back=function(){var t=this;this.inBackProcess=!0,this.activeModule.exit(f.BACK).then((function(e){e?t.showPreviousModule():t.inBackProcess=!1}))},e.prototype.initializeModule=function(t,e){return w(this,void 0,void 0,(function(){return g(this,(function(n){switch(n.label){case 0:return this.mountedModules.has(t.getName())?[3,2]:[4,pt.getInstance().loadModuleRecursively(t.getName(),!0)];case 1:if(n.sent(),!this.mountedModules.has(t.getName()))throw new d("指定されたモジュールはコンテナに登録されていません。");console.log(t.getName()+" is lazy loaded."),n.label=2;case 2:return t.initialize(e),[2,!0]}}))}))},e.prototype.activateModule=function(t,e){this.activeModule&&this.activeModule.hide(),this.activeModule=t,t.show(e),this.triggerSubContainerNavigationEvent()},e.prototype.showPreviousModule=function(){this.moduleChangeHistory.length>0&&this.moduleChangeHistory.pop(),this.moduleChangeHistory.length>0?this.activateModule(this.moduleChangeHistory[this.moduleChangeHistory.length-1]):this.activeModule&&this.activeModule!==this.defaultModule&&this.activeModule.hide()},e.prototype.hideAllModules=function(){this.mountedModules.forEach((function(t){t.hide()}))},e}(p),b=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),M=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{l(i.next(t))}catch(t){r(t)}}function a(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):new n((function(e){e(t.value)})).then(s,a)}l((i=i.apply(t,e||[])).next())}))},C=function(t,e){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},S=function(t){function e(e,n,i,o){var r=t.call(this,e,n,i,o)||this;return r.moduleOrders=new Map,r.scrollBoxElement=document.createElement("div"),r.scrollBoxElement.style.position="absolute",r.scrollBoxElement.style.overflow="hidden",r.scrollBoxElement.style.width="100%",r.scrollBoxElement.style.height="100%",r.scrollBoxElement.className="itm_flat_container_transition",n.classList.add("itm_flat_container"),n.appendChild(r.scrollBoxElement),r}return b(e,t),e.prototype.onShow=function(){},e.prototype.addModule=function(t){return M(this,void 0,void 0,(function(){var e=this;return C(this,(function(n){switch(n.label){case 0:return this.mountedModules.set(t.getName(),t),this.moduleOrders.set(t.getName(),this.mountedModules.size-1),[4,t.mount((function(t){return e.scrollBoxElement.appendChild(t),e.scrollBoxElement.style.width="calc(100% * "+e.mountedModules.size+")",e}))];case 1:return n.sent(),[2,!0]}}))}))},e.prototype.initialize=function(t){this.updateAllModulePositionAndSize(),this.mountedModules.forEach((function(e){e.initialize(t),e.show()})),this.defaultModule&&this.forward(this.defaultModule,t)},e.prototype.activateModule=function(t,e){return M(this,void 0,void 0,(function(){var e,n;return C(this,(function(i){if(!this.mountedModules.has(t.getName()))throw new d("マウントされていないモジュールです。");return e=this.moduleOrders.get(t.getName()),n=Math.round(1e4/this.mountedModules.size*e)/100,this.scrollBoxElement.style.transform="translate(-"+String(n)+"%)",this.activeModule=t,this.triggerSubContainerNavigationEvent(),[2,!0]}))}))},e.prototype.forward=function(t,e){return M(this,void 0,void 0,(function(){return C(this,(function(n){return this.activateModule(t,e),[2,null]}))}))},e.prototype.back=function(){},e.prototype.updateAllModulePositionAndSize=function(){var t=this,e="calc(100% / "+this.mountedModules.size+" * ",n=String(Math.round(1/this.mountedModules.size*1e4)/100)+"%";this.mountedModules.forEach((function(i){var o=t.moduleOrders.get(i.getName()),r=e+o+")";i.changeModuleCssPosition(r,"0px"),i.changeModuleCssSize(n,"100%")}))},e.prototype.showPreviousModule=function(){throw new Error("Method not implemented.")},e}(p),x=function(){function t(){this.containers=new Map,this.windowResizeEventHandlerBindThis=this.windowResizeEventHandler.bind(this)}return t.getInstance=function(){return t.instance},t.prototype.setRootElement=function(t){this.rootContainer=this.createContainer("root","",t,null),window.addEventListener("resize",this.windowResizeEventHandlerBindThis)},t.prototype.windowResizeEventHandler=function(t){this.rootContainer.onResize()},t.prototype.createContainer=function(t,e,n,i){if(this.containers.has(t))throw new d("コンテナID '"+t+"' は既に登録されています。");var o=null;return o=e&&"separated"!==e?new S(t,n,i):new E(t,n,i,{enableCssTransition:!0}),this.containers.set(t,o),o},t.prototype.initializeRootContainer=function(){console.log("ContainerManager.initializeRootContainer"),this.rootContainer.initialize()},t.prototype.getContainer=function(t){return this.containers.get(t)},t.instance=new t,t}(),_=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{l(i.next(t))}catch(t){r(t)}}function a(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):new n((function(e){e(t.value)})).then(s,a)}l((i=i.apply(t,e||[])).next())}))},T=function(t,e){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},z=function(){function t(){}return t.getInstance=function(){return t.instance},t.prototype.forward=function(t,e){return _(this,void 0,void 0,(function(){var n,i,o,r,s;return T(this,(function(a){return n=t.split("::"),i=n[0],o=n[1],r=x.getInstance().getContainer(i),s=pt.getInstance().getModule(o),[2,r.forward(s,e)]}))}))},t.prototype.back=function(t){x.getInstance().getContainer(t).back()},t.instance=new t,t}(),I=function(t,e){this.x=t,this.y=e},O=function(t,e){this.width=t,this.height=e},P=function(t,e){this.cssWidth=t,this.cssHeight=e},L=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{l(i.next(t))}catch(t){r(t)}}function a(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):new n((function(e){e(t.value)})).then(s,a)}l((i=i.apply(t,e||[])).next())}))},k=function(t,e){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},D=function(){function t(t,e){this.standyStateClass="standy_state",this.enterTransitionClass="enter_transition",this.leaveTransitionClass="leave_transition",this.endStateClass="end_state",this.showResolver=null,this.hideResolver=null,this.target=t,this.setCustomTransitionClasses(e),this.target.addEventListener("transitionend",this.onTransitionEnd.bind(this))}return t.prototype.onTransitionEnd=function(t){this.hideResolver&&(this.setStandbyStateClasses(),this.hideResolver(!0),this.hideResolver=null),this.showResolver&&(this.showResolver(!0),this.showResolver=null)},t.prototype.setCustomTransitionClasses=function(t){t&&(void 0!==t.standyStateClass&&(this.standyStateClass=t.standyStateClass),void 0!==t.enterTransitionClass&&(this.enterTransitionClass=t.enterTransitionClass),void 0!==t.leaveTransitionClass&&(this.leaveTransitionClass=t.leaveTransitionClass),void 0!==t.endStateClass&&(this.endStateClass=t.endStateClass)),"none"!==this.target.style.display&&"hidden"!==this.target.style.visibility||this.target.classList.add(this.standyStateClass)},t.prototype.show=function(t){return L(this,void 0,void 0,(function(){var e=this;return k(this,(function(n){return this.hideResolver&&(this.hideResolver(!0),this.hideResolver=null),this.toggleClasses(!0,t)?[2,new Promise((function(t){e.showResolver=t}))]:[2,Promise.resolve(!0)]}))}))},t.prototype.hide=function(t){return L(this,void 0,void 0,(function(){var e=this;return k(this,(function(n){return"none"===this.target.style.display||"hidden"===this.target.style.visibility?[2]:(this.showResolver&&(this.showResolver(!0),this.showResolver=null),this.toggleClasses(!1,t)?[2,new Promise((function(t){e.hideResolver=t}))]:(this.setStandbyStateClasses(),[2,Promise.resolve(!0)]))}))}))},t.prototype.toggleClasses=function(t,e){var n=this,i=!0;return t?(this.target.style.display="",this.target.style.visibility="",window.setTimeout((function(){n.target.style.pointerEvents="",n.enterTransitionClass&&!e?n.target.classList.add(n.enterTransitionClass):i=!1,n.standyStateClass&&n.target.classList.remove(n.standyStateClass),n.leaveTransitionClass&&n.target.classList.remove(n.leaveTransitionClass),n.endStateClass&&n.target.classList.remove(n.endStateClass)}),0)):(this.target.style.pointerEvents="none",this.standyStateClass&&this.target.classList.remove(this.standyStateClass),this.enterTransitionClass&&this.target.classList.remove(this.enterTransitionClass),this.leaveTransitionClass&&!e?this.target.classList.add(this.leaveTransitionClass):(this.target.style.display="none",i=!1),this.endStateClass&&this.target.classList.add(this.endStateClass)),i},t.prototype.setStandbyStateClasses=function(){this.target.style.display="none",this.standyStateClass&&this.target.classList.add(this.standyStateClass),this.leaveTransitionClass&&this.target.classList.remove(this.leaveTransitionClass),this.endStateClass&&this.target.classList.remove(this.endStateClass)},t}(),R=function(){function t(e,n,i){this.lastFocusIsDetector=!1,this.active=!1,this.inactiveModalMode=!1,this.viewPortEl=e,this.name=n;var o=i?i.cssWidth:t.DEFAULT_OVERLAY_SIZE_WIDTH,r=i?i.cssHeight:t.DEFAULT_OVERLAY_SIZE_HEIGHT;this.originalSize=new P(o,r),this.frameEl=document.createElement("div"),this.frameEl.style.position="absolute",this.frameEl.style.backgroundColor="transparent",this.frameEl.style.visibility="hidden",this.frameEl.addEventListener("selectstart",this.onSelectStart.bind(this)),this.frameEl.addEventListener("mousedown",this.onOuterMouseDown.bind(this)),this.tabFocusMoveHeadStopper=document.createElement("div"),this.tabFocusMoveHeadStopper.className="itm_tabfocus_move_stopper",this.tabFocusMoveHeadStopper.style.height="0px",this.tabFocusMoveHeadStopper.tabIndex=0,this.tabFocusMoveHeadStopper.addEventListener("focusin",this.onTabFocusMoveHeadStopperFocusIn.bind(this)),this.tabFocusMoveHeadDetector=document.createElement("div"),this.tabFocusMoveHeadDetector.className="itm_tabfocus_move_detector",this.tabFocusMoveHeadDetector.style.height="0px",this.tabFocusMoveHeadDetector.tabIndex=0,this.tabFocusMoveHeadDetector.addEventListener("focusin",this.onTabFocusMoveHeadDetectorFocusIn.bind(this)),this.contentEl=this.outerContentEl=document.createElement("div"),this.contentEl.style.position="absolute",this.contentEl.style.overflow="hidden",this.contentEl.style.width="100%",this.contentEl.style.height="100%",this.modalInactiveLayer=document.createElement("div"),this.modalInactiveLayer.className="itm_modal_background_layer",this.modalInactiveLayer.style.position="absolute",this.modalInactiveLayer.style.overflow="hidden",this.modalInactiveLayer.style.display="none",this.modalInactiveLayer.style.width="100%",this.modalInactiveLayer.style.height="100%",this.modalInactiveLayerTransitionDriver=new D(this.modalInactiveLayer),this.resize(o,r),this.tabFocusMoveTailDetector=document.createElement("div"),this.tabFocusMoveTailDetector.className="itm_tabfocus_move_detector",this.tabFocusMoveTailDetector.style.height="0px",this.tabFocusMoveTailDetector.tabIndex=0,this.tabFocusMoveTailDetector.addEventListener("focusin",this.onTabFocusMoveTailDetectorFocusIn.bind(this)),this.tabFocusMoveTailStopper=document.createElement("div"),this.tabFocusMoveTailStopper.className="itm_tabfocus_move_stopper",this.tabFocusMoveTailStopper.style.height="0px",this.tabFocusMoveTailStopper.tabIndex=0,this.tabFocusMoveTailStopper.addEventListener("focusin",this.onTabFocusMoveTailStopperFocusIn.bind(this)),this.contentEl.addEventListener("focusin",this.onFocusIn.bind(this)),this.contentEl.addEventListener("focusout",this.onFocusOut.bind(this)),this.frameEl.appendChild(this.tabFocusMoveHeadStopper),this.frameEl.appendChild(this.tabFocusMoveHeadDetector),this.frameEl.appendChild(this.contentEl),this.frameEl.appendChild(this.tabFocusMoveTailDetector),this.frameEl.appendChild(this.tabFocusMoveTailStopper),this.frameEl.appendChild(this.modalInactiveLayer),e.appendChild(this.frameEl),this.cacheCurrentOffsetSize(),this.outerFrameTransitionDriver=new D(this.frameEl)}return t.prototype.__dispachMouseMoveEvent=function(t,e,n,i){},t.prototype.__dispachMouseUpEvent=function(t,e){},t.prototype.registerAsContainer=function(e,n){var i=x.getInstance(),o=t.instanceSequenceTable.get(e);void 0===o&&(o=0),this.container=i.createContainer("__"+e+"_"+String(o),"",n,null),t.instanceSequenceTable.set(e,o+1)},t.prototype.onSelectStart=function(t){},t.prototype.onTabFocusMoveHeadStopperFocusIn=function(t){this.lastFocusedEl?this.lastFocusedEl.focus():this.tabFocusMoveHeadDetector.focus()},t.prototype.onTabFocusMoveHeadDetectorFocusIn=function(t){this.lastFocusIsDetector||(this.lastFocusIsDetector=!0,this.tabFocusMoveTailDetector.focus()),t.stopPropagation()},t.prototype.onTabFocusMoveTailDetectorFocusIn=function(t){this.lastFocusIsDetector||(this.lastFocusIsDetector=!0,this.tabFocusMoveHeadDetector.focus()),t.stopPropagation()},t.prototype.onTabFocusMoveTailStopperFocusIn=function(t){this.lastFocusedEl?this.lastFocusedEl.focus():this.tabFocusMoveTailDetector.focus()},t.prototype.onOuterMouseDown=function(t){this.inactiveModalMode||q.getInstance().overlayMouseDownEventHandler(this.name)},t.prototype.onFocusIn=function(t){this.lastFocusIsDetector=!1,q.getInstance().overlayLastFocusedElement=null},t.prototype.onFocusOut=function(t){this.lastFocusIsDetector=!1,this.lastFocusedEl=t.target,q.getInstance().overlayLastFocusedElement=t.target},t.prototype.cacheCurrentOffsetSize=function(){var t=this.frameEl.offsetWidth,e=this.frameEl.offsetHeight;t>0&&e>0&&(this.offsetSizeCache=new O(t,e))},t.prototype.restoreOriginalSize=function(){this.resize(this.originalSize.cssWidth,this.originalSize.cssHeight)},t.prototype.changeZIndex=function(t){this.zIndex=t,this.frameEl.style.zIndex=String(t)},t.prototype.getName=function(){return this.name},t.prototype.getZIndex=function(){return this.zIndex},t.prototype.changePosition=function(t,e){this.position=new I(t,e),this.frameEl.style.left=String(t)+"px",this.frameEl.style.top=String(e)+"px"},t.prototype.moveToViewPortCenter=function(){var t=Math.round((this.viewPortEl.offsetWidth-this.offsetSizeCache.width)/2),e=Math.round((this.viewPortEl.offsetHeight-this.offsetSizeCache.height)/2);this.changePosition(t,e)},t.prototype.resize=function(t,e){this.size=new P(t,e),this.frameEl.style.width=t,this.frameEl.style.height=e},t.prototype.activate=function(){this.active=!0,this.inactiveModalMode=!1,this.modalInactiveLayerTransitionDriver.hide()},t.prototype.inactivate=function(t){this.active=!1,this.inactiveModalMode=t,t&&this.modalInactiveLayerTransitionDriver.show()},t.prototype.isActive=function(){return this.active},t.DEFAULT_OVERLAY_SIZE_WIDTH="50%",t.DEFAULT_OVERLAY_SIZE_HEIGHT="50%",t.instanceSequenceTable=new Map,t}(),H=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),A=function(t){function e(n,i,o){var r=t.call(this,n,i,o)||this;r.resizable=!0,r.isResizing=!1,r.resizeHandleEl=new Array;var s="calc(100% - "+2*e.resizeHandleThicknessPx+"px)";return r.contentEl.style.left=String(e.resizeHandleThicknessPx)+"px",r.contentEl.style.top=String(e.resizeHandleThicknessPx)+"px",r.contentEl.style.width=s,r.contentEl.style.height=s,r.modalInactiveLayer.style.left=String(e.resizeHandleThicknessPx)+"px",r.modalInactiveLayer.style.top=String(e.resizeHandleThicknessPx)+"px",r.modalInactiveLayer.style.width=s,r.modalInactiveLayer.style.height=s,r.createResizeHandleElements(),r.resize(r.size.cssWidth,r.size.cssHeight),r}return H(e,t),e.prototype.createResizeHandleElements=function(){for(var t=this,n=2*e.resizeHandleThicknessPx,i=0;i<8;i++){var o=document.createElement("div");o.dataset.positionIndex=String(i),o.style.position="absolute",o.style.width=n+"px",o.style.height=n+"px",o.style.zIndex="-1",o.addEventListener("mousedown",this.onResizeHandleMouseDown.bind(this)),this.resizeHandleEl.push(o)}this.resizeHandleEl[0].style.cursor="nwse-resize",this.resizeHandleEl[1].style.left=String(n)+"px",this.resizeHandleEl[1].style.width="calc(100% - "+String(2*n)+"px)",this.resizeHandleEl[1].style.cursor="ns-resize",this.resizeHandleEl[2].style.right="0px",this.resizeHandleEl[2].style.cursor="nesw-resize",this.resizeHandleEl[3].style.top=String(n)+"px",this.resizeHandleEl[3].style.height="calc(100% - "+String(2*n)+"px)",this.resizeHandleEl[3].style.cursor="ew-resize",this.resizeHandleEl[4].style.right="0px",this.resizeHandleEl[4].style.top=String(n)+"px",this.resizeHandleEl[4].style.height="calc(100% - "+String(2*n)+"px)",this.resizeHandleEl[4].style.cursor="ew-resize",this.resizeHandleEl[5].style.bottom="0px",this.resizeHandleEl[5].style.cursor="nesw-resize",this.resizeHandleEl[6].style.left=String(n)+"px",this.resizeHandleEl[6].style.bottom="0px",this.resizeHandleEl[6].style.width="calc(100% - "+String(2*n)+"px)",this.resizeHandleEl[6].style.cursor="ns-resize",this.resizeHandleEl[7].style.right="0px",this.resizeHandleEl[7].style.bottom="0px",this.resizeHandleEl[7].style.cursor="nwse-resize",this.resizeHandleEl.forEach((function(e){t.frameEl.appendChild(e)}))},e.prototype.__dispachMouseMoveEvent=function(n,i,o,r){var s,a;if(t.prototype.__dispachMouseMoveEvent.call(this,n,i,o,r),this.isResizing&&this.resizable){switch(this.resizePositionIndex){case 0:this.changePosition(this.resizeStartPos.x+(n-this.resizeStartMousePos.x),this.resizeStartPos.y+(i-this.resizeStartMousePos.y)),s=this.resizeStartSizePx.width-(n-this.resizeStartMousePos.x),a=this.resizeStartSizePx.height-(i-this.resizeStartMousePos.y);break;case 1:this.changePosition(this.position.x,this.resizeStartPos.y+(i-this.resizeStartMousePos.y)),s=this.resizeStartSizePx.width,a=this.resizeStartSizePx.height-(i-this.resizeStartMousePos.y);break;case 2:this.changePosition(this.position.x,this.resizeStartPos.y+(i-this.resizeStartMousePos.y)),s=this.resizeStartSizePx.width+(n-this.resizeStartMousePos.x),a=this.resizeStartSizePx.height-(i-this.resizeStartMousePos.y);break;case 3:this.changePosition(this.resizeStartPos.x+(n-this.resizeStartMousePos.x),this.position.y),s=this.resizeStartSizePx.width-(n-this.resizeStartMousePos.x),a=this.resizeStartSizePx.height;break;case 4:this.changePosition(this.position.x,this.position.y),s=this.resizeStartSizePx.width+(n-this.resizeStartMousePos.x),a=this.resizeStartSizePx.height;break;case 5:this.changePosition(this.resizeStartPos.x+(n-this.resizeStartMousePos.x),this.position.y),s=this.resizeStartSizePx.width-(n-this.resizeStartMousePos.x),a=this.resizeStartSizePx.height+(i-this.resizeStartMousePos.y);break;case 6:this.changePosition(this.position.x,this.position.y),s=this.resizeStartSizePx.width,a=this.resizeStartSizePx.height+(i-this.resizeStartMousePos.y);break;case 7:this.changePosition(this.position.x,this.position.y),s=this.resizeStartSizePx.width+(n-this.resizeStartMousePos.x),a=this.resizeStartSizePx.height+(i-this.resizeStartMousePos.y)}s-=2*e.resizeHandleThicknessPx,a-=2*e.resizeHandleThicknessPx,this.resize(s+"px",a+"px")}},e.prototype.__dispachMouseUpEvent=function(e,n){t.prototype.__dispachMouseUpEvent.call(this,e,n),this.isResizing=!1,this.cacheCurrentOffsetSize()},e.prototype.onResizeHandleMouseDown=function(t){this.isResizing=!0,this.resizePositionIndex=parseInt(t.target.dataset.positionIndex),this.resizeStartMousePos=new I(t.screenX,t.screenY),this.resizeStartPos=new I(this.position.x,this.position.y),this.resizeStartSizePx=new O(this.frameEl.offsetWidth,this.frameEl.offsetHeight),q.getInstance().changeContentsSelectable(!1)},e.prototype.resize=function(t,n){this.size=new P(t,n),this.frameEl.style.width="calc("+t+" + "+2*e.resizeHandleThicknessPx+"px)",this.frameEl.style.height="calc("+n+" + "+2*e.resizeHandleThicknessPx+"px)"},e.prototype.setResizable=function(t){this.resizable=t,this.refreshResizeHandleElementActivate()},e.prototype.refreshResizeHandleElementActivate=function(){var t=this.resizable&&!this.inactiveModalMode;this.resizeHandleEl.forEach((function(e){e.style.display=t?"":"none"}))},e.resizeHandleThicknessPx=8,e}(R),F=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),B=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{l(i.next(t))}catch(t){r(t)}}function a(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):new n((function(e){e(t.value)})).then(s,a)}l((i=i.apply(t,e||[])).next())}))},N=function(t,e){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},U=function(t){function e(e,n,i){var o=t.call(this,e,n,i?i.size:null)||this;return o.isDragging=!1,i&&!1===i.resizable&&o.setResizable(!1),o.wrapperEl=document.createElement("div"),o.wrapperEl.style.position="absolute",o.wrapperEl.style.display="flex",o.wrapperEl.style.flexDirection="column",o.wrapperEl.style.width="100%",o.wrapperEl.style.height="100%",o.headerEl=document.createElement("div"),o.headerEl.className="itm_dialog_window_header",o.headerEl.style.position="relative",o.headerEl.style.display="flex",o.headerEl.style.width="100%",i&&i.hideHeader&&(o.headerEl.style.display="none"),o.headerTitleEl=document.createElement("div"),o.headerTitleEl.className="caption",o.headerTitleEl.textContent=i&&i.defaultCaption?i.defaultCaption:"",o.headerCloseButtonEl=document.createElement("div"),o.headerCloseButtonEl.className="close_button",o.headerCloseButtonEl.textContent="×",o.headerCloseButtonEl.addEventListener("click",o.onHeaderCloseButtonClick.bind(o)),o.headerEl.appendChild(o.headerTitleEl),o.headerEl.appendChild(o.headerCloseButtonEl),o.headerEl.addEventListener("mousedown",o.onHeaderMouseDown.bind(o)),o.headerEl.addEventListener("dragstart",o.onHeaderDragStart.bind(o)),o.containerEl=document.createElement("div"),o.containerEl.className="itm_dialog_window_body",o.containerEl.style.position="relative",o.containerEl.style.flexGrow="1",o.containerEl.style.flexShrink="1",o.containerEl.style.width="100%",o.registerAsContainer("window",o.containerEl),o.footerEl=document.createElement("div"),o.footerEl.className="itm_dialog_window_footer",o.footerEl.style.position="relative",o.footerEl.style.width="100%",i&&i.hideFooter&&(o.footerEl.style.display="none"),o.okButtonEl=document.createElement("input"),o.okButtonEl.type="button",o.okButtonEl.classList.add("itm_dialog_window_footer_button","ok"),o.okButtonEl.value="OK",o.okButtonEl.addEventListener("click",o.onOkButtonClick.bind(o)),o.cancelButtonEl=document.createElement("input"),o.cancelButtonEl.type="button",o.cancelButtonEl.classList.add("itm_dialog_window_footer_button","cancel"),o.cancelButtonEl.value="キャンセル",o.cancelButtonEl.addEventListener("click",o.onCancelButtonClick.bind(o)),o.applyButtonEl=document.createElement("input"),o.applyButtonEl.type="button",o.applyButtonEl.classList.add("itm_dialog_window_footer_button","apply"),o.applyButtonEl.value="適用",o.footerEl.appendChild(o.okButtonEl),o.footerEl.appendChild(o.cancelButtonEl),o.wrapperEl.appendChild(o.headerEl),o.wrapperEl.appendChild(o.containerEl),o.wrapperEl.appendChild(o.footerEl),o.contentEl.className="itm_dialog_window_container",o.contentEl.appendChild(o.wrapperEl),o.outerFrameTransitionDriver.setCustomTransitionClasses({standyStateClass:"itm_dialog_window_standy_state",enterTransitionClass:"itm_dialog_window_enter_transition",leaveTransitionClass:"itm_dialog_window_leave_transition",endStateClass:"itm_dialog_window_end_state"}),o}return F(e,t),e.prototype.onHeaderMouseDown=function(t){this.isDragging=!0,q.getInstance().changeContentsSelectable(!1)},e.prototype.onHeaderDragStart=function(t){t.preventDefault()},e.prototype.onHeaderCloseButtonClick=function(t){var e=this;this.container.getActiveModule().exit(f.CANCEL).then((function(t){t&&e.close()}))},e.prototype.onOkButtonClick=function(t){var e=this;this.container.getActiveModule().exit(f.OK).then((function(t){t&&e.close(e.container.getContainerResult())}))},e.prototype.onCancelButtonClick=function(t){var e=this;this.container.getActiveModule().exit(f.CANCEL).then((function(t){t&&e.close()}))},e.prototype.onApplyButtonClick=function(t){},e.prototype.waitForOverlayClose=function(){var t=this;return new Promise((function(e){t.waitForOverlayCloseResolver=e}))},e.prototype.__dispachMouseMoveEvent=function(e,n,i,o){t.prototype.__dispachMouseMoveEvent.call(this,e,n,i,o),this.isDragging&&this.changePosition(this.position.x+i,this.position.y+o)},e.prototype.__dispachMouseUpEvent=function(e,n){t.prototype.__dispachMouseUpEvent.call(this,e,n),this.isDragging=!1},e.prototype.getContainer=function(){return this.container},e.prototype.setWindowTitle=function(t){this.headerTitleEl.textContent=t},e.prototype.show=function(t,e){return B(this,void 0,void 0,(function(){return N(this,(function(n){return e&&e.position?this.changePosition(e.position.x,e.position.y):this.moveToViewPortCenter(),this.container.initialize(t),this.outerFrameTransitionDriver.show(),[2,this.waitForOverlayClose()]}))}))},e.prototype.showAsModal=function(t,e){return B(this,void 0,void 0,(function(){return N(this,(function(n){return[2,this.show(t,e)]}))}))},e.prototype.close=function(t){this.outerFrameTransitionDriver.hide(),window.setTimeout(this.waitForOverlayCloseResolver.bind(this),0,t)},e.prototype.activate=function(){t.prototype.activate.call(this),this.headerEl.classList.remove("inactive")},e.prototype.inactivate=function(e){t.prototype.inactivate.call(this,e),this.headerEl.classList.add("inactive")},e}(A),W=function(){function t(){}return t.isMsIE=!1,t.currentMouseClientX=0,t.currentMouseClientY=0,t}(),j=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),V=function(t){function e(e,n,i){var o=t.call(this,e,n,i?i.size:null)||this;return o.containerEl=document.createElement("div"),o.containerEl.className="",o.containerEl.style.position="relative",o.containerEl.style.width="100%",o.containerEl.style.height="100%",o.registerAsContainer("contextmenu",o.containerEl),o.contentEl.className="itm_context_menu_container",o.contentEl.appendChild(o.containerEl),o.contentEl.addEventListener("mousedown",o.onContentMouseDown.bind(o)),o.outerFrameTransitionDriver.setCustomTransitionClasses({standyStateClass:"itm_context_menu_standy_state",enterTransitionClass:"itm_context_menu_enter_transition",leaveTransitionClass:"itm_context_menu_leave_transition",endStateClass:"itm_context_menu_end_state"}),o}return j(e,t),e.prototype.getContainer=function(){return this.container},e.prototype.show=function(t,e){var n,i;n=W.currentMouseClientX,i=W.currentMouseClientY;var o=this.offsetSizeCache.width,r=this.offsetSizeCache.height,s=n+o,a=i+r,l=window.document.documentElement.clientWidth,c=window.document.documentElement.clientHeight,u=o<l,h=r<c,d=s<=l,p=a<=c,f=n>=o,y=i>=r;return this.restoreOriginalSize(),u?d||(f?n-=o:n=l-o):n=0,h?p||(y?i-=r:i=c-r):(i=0,this.resize(o+"px",c+"px")),this.changePosition(n,i),this.container.initialize(t),this.outerFrameTransitionDriver.show(),this.waitForOverlayClose()},e.prototype.showAsModal=function(t,e){return this.show(t,e)},e.prototype.close=function(t){this.outerFrameTransitionDriver.hide(),window.setTimeout(this.waitForOverlayCloseResolver.bind(this),0,t)},e.prototype.waitForOverlayClose=function(){var t=this;return new Promise((function(e){t.waitForOverlayCloseResolver=e}))},e.prototype.onContentMouseDown=function(t){q.getInstance().cancelAutoClosingOnlyOnce()},e}(R),Y=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();!function(t){t[t.Top=0]="Top",t[t.Right=1]="Right",t[t.Bottom=2]="Bottom",t[t.Left=3]="Left"}(v||(v={}));var X=function(t){function e(e,n,i){var o=t.call(this,e,n,null)||this;return o.dockType=void 0!==i.dockType?i.dockType:v.Left,o.dockSize=void 0!==i.dockSize?i.dockSize:"33%",o.changeDockType(o.dockType),o.containerEl=document.createElement("div"),o.containerEl.className="",o.containerEl.style.position="relative",o.containerEl.style.width="100%",o.containerEl.style.height="100%",o.registerAsContainer("drawer",o.containerEl),o.contentEl.className="itm_drawer_container",o.contentEl.appendChild(o.containerEl),o.contentEl.addEventListener("mousedown",o.onContentMouseDown.bind(o)),o}return Y(e,t),e.prototype.getContainer=function(){return this.container},e.prototype.changeDockType=function(t){var e;switch(t===v.Left||t===v.Right?(this.frameEl.style.width=this.dockSize,this.frameEl.style.height="100%"):t!==v.Top&&t!==v.Bottom||(this.frameEl.style.width="100%",this.frameEl.style.height=this.dockSize),this.frameEl.style.left="",this.frameEl.style.right="",this.frameEl.style.top="",this.frameEl.style.bottom="",t===v.Left||t===v.Top||t===v.Bottom?this.frameEl.style.left="0px":this.frameEl.style.right="0px",t===v.Left||t===v.Right||t===v.Top?this.frameEl.style.top="0px":this.frameEl.style.bottom="0px",t){case v.Left:e="left";break;case v.Right:e="right";break;case v.Top:e="top";break;case v.Bottom:e="bottom"}this.outerFrameTransitionDriver.setCustomTransitionClasses({standyStateClass:"itm_drawer_"+e+"_dock_standy_state",enterTransitionClass:"itm_drawer_enter_transition",leaveTransitionClass:"itm_drawer_leave_transition",endStateClass:"itm_drawer_"+e+"_dock_end_state"})},e.prototype.changePosition=function(t,e){},e.prototype.show=function(t,e){return this.container.initialize(t),this.outerFrameTransitionDriver.show(),this.waitForOverlayClose()},e.prototype.showAsModal=function(t,e){return this.show(t,e)},e.prototype.close=function(t){this.outerFrameTransitionDriver.hide(),window.setTimeout(this.waitForOverlayCloseResolver.bind(this),0,t)},e.prototype.waitForOverlayClose=function(){var t=this;return new Promise((function(e){t.waitForOverlayCloseResolver=e}))},e.prototype.onContentMouseDown=function(t){q.getInstance().cancelAutoClosingOnlyOnce()},e}(R),Z=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{l(i.next(t))}catch(t){r(t)}}function a(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):new n((function(e){e(t.value)})).then(s,a)}l((i=i.apply(t,e||[])).next())}))},G=function(t,e){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},q=function(){function t(){this.viewPortEl=null,this.overlayLastFocusedElement=null,this.previousMouseX=0,this.previousMouseY=0,this.contentsSelectable=!0,this.requestedAutoCloseCancelOnlyOnce=!1,this.DEFAULT_OVERLAY_START_Z_INDEX=10,this.MODAL_START_Z_INDEX=1e3,this.FOREGROUND_START_Z_INDEX=2e3,this.overlays=new Map,this.overlayManagementTable=new Map,this.modalBackgroundLayer=document.createElement("div"),this.modalBackgroundLayer.className="itm_modal_background_layer",this.modalBackgroundLayer.style.position="absolute",this.modalBackgroundLayer.style.overflow="hidden",this.modalBackgroundLayer.style.width="100%",this.modalBackgroundLayer.style.height="100%",this.modalBackgroundLayer.style.display="none",this.modalBackgroundLayer.style.zIndex=String(this.MODAL_START_Z_INDEX),this.modalBackgroundLayerTransitionDriver=new D(this.modalBackgroundLayer),this.onFocusInBindedThis=this.onFocusIn.bind(this),this.onMouseDownBindedThis=this.onMouseDown.bind(this),this.onMouseMoveBindedThis=this.onMouseMove.bind(this),this.onMouseUpBindedThis=this.onMouseUp.bind(this),this.onSelectStartBindedThis=this.onSelectStart.bind(this),this.windowResizeEventHandlerBindThis=this.windowResizeEventHandler.bind(this)}return t.getInstance=function(){return t.instance},t.prototype.findOverlayByContainer=function(t){var e=null;return this.overlays.forEach((function(n){n.getContainer()===t&&(e=n)})),e},t.prototype.onMouseDown=function(t){var e=this;this.requestedAutoCloseCancelOnlyOnce||this.overlayManagementTable.forEach((function(t,n){if(t.isVisible&&t.isAutoCloseableWhenOutfocus){var i=e.overlays.get(n);i.getContainer().getActiveModule().exit(f.CANCEL).then((function(t){t&&i.close()}))}})),this.requestedAutoCloseCancelOnlyOnce=!1},t.prototype.onMouseMove=function(t){var e=t.screenX-this.previousMouseX,n=t.screenY-this.previousMouseY;this.previousMouseX=t.screenX,this.previousMouseY=t.screenY,this.overlays.forEach((function(i){i.__dispachMouseMoveEvent(t.screenX,t.screenY,e,n)}))},t.prototype.onMouseUp=function(t){this.overlays.forEach((function(e){e.__dispachMouseUpEvent(t.screenX,t.screenY)})),this.changeContentsSelectable(!0)},t.prototype.windowResizeEventHandler=function(t){},t.prototype.onSelectStart=function(t){this.contentsSelectable||t.preventDefault()},t.prototype.onFocusIn=function(t){this.overlayLastFocusedElement=null},t.prototype.setViewPortElement=function(t){null!==this.viewPortEl&&(this.viewPortEl.removeEventListener("focusin",this.onFocusInBindedThis),this.viewPortEl.removeEventListener("mousedown",this.onMouseDownBindedThis),this.viewPortEl.removeEventListener("mousemove",this.onMouseMoveBindedThis),this.viewPortEl.removeEventListener("mouseup",this.onMouseUpBindedThis),this.viewPortEl.removeEventListener("selectstart",this.onSelectStartBindedThis)),this.viewPortEl=t,this.viewPortEl.addEventListener("focusin",this.onFocusInBindedThis),this.viewPortEl.addEventListener("mousedown",this.onMouseDownBindedThis),this.viewPortEl.addEventListener("mousemove",this.onMouseMoveBindedThis),this.viewPortEl.addEventListener("mouseup",this.onMouseUpBindedThis),this.viewPortEl.addEventListener("selectstart",this.onSelectStartBindedThis),this.viewPortEl.appendChild(this.modalBackgroundLayer)},t.prototype.createWindow=function(t,e){var n=new U(this.viewPortEl,t,e);return this.overlays.set(t,n),this.overlayManagementTable.set(t,new K),n},t.prototype.createContextMenu=function(t,e){var n=new V(this.viewPortEl,t,e);this.overlays.set(t,n);var i=new K;return i.isAutoCloseableWhenOutfocus=!0,this.overlayManagementTable.set(t,i),n},t.prototype.createDrawer=function(t,e){var n=new X(this.viewPortEl,t,e);this.overlays.set(t,n);var i=new K;return i.isAutoCloseableWhenOutfocus=!0,this.overlayManagementTable.set(t,i),n},t.prototype.changeContentsSelectable=function(t){this.contentsSelectable=t},t.prototype.beginModalMode=function(){this.modalBackgroundLayerTransitionDriver.show()},t.prototype.endModalMode=function(){var t=!1;this.overlayManagementTable.forEach((function(e,n){e.isVisible&&e.isModal&&(t=!0)})),t||this.modalBackgroundLayerTransitionDriver.hide()},t.prototype.show=function(t,e,n){return Z(this,void 0,void 0,(function(){var i,o,r;return G(this,(function(s){switch(s.label){case 0:return[4,this.checkAndLoadLazyModule(t)];case 1:return s.sent(),i=this.overlays.get(t),(o=this.overlayManagementTable.get(t)).parentOverlay=n?n.parent:null,o.isVisible=!0,this.activateSpecificOverlay(t),[4,i.show(e,n)];case 2:return r=s.sent(),o.isVisible=!1,this.activateTopOverlay(),[2,r]}}))}))},t.prototype.showAsModal=function(t,e,n){return Z(this,void 0,void 0,(function(){var i,o;return G(this,(function(r){switch(r.label){case 0:return[4,this.checkAndLoadLazyModule(t)];case 1:return r.sent(),(i=this.overlayManagementTable.get(t)).isModal=!0,this.beginModalMode(),[4,this.show(t,e,n)];case 2:return o=r.sent(),i.isModal=!1,this.endModalMode(),[2,o]}}))}))},t.prototype.checkAndLoadLazyModule=function(t){return Z(this,void 0,void 0,(function(){return G(this,(function(e){switch(e.label){case 0:return this.overlayManagementTable.has(t)?[3,2]:[4,pt.getInstance().loadModuleRecursively(t,!0)];case 1:if(e.sent(),!this.overlayManagementTable.has(t))throw new d("指定されたモジュールはコンテナに登録されていません。");e.label=2;case 2:return[2,!0]}}))}))},t.prototype.overlayMouseDownEventHandler=function(t){this.activateSpecificOverlay(t)},t.prototype.activateSpecificOverlay=function(t){var e=this,n=new Array,i=this.overlays.get(t);this.overlays.forEach((function(e,i){i!==t&&n.push(e)})),n.sort((function(t,e){return e.getZIndex()-t.getZIndex()})),n.unshift(i);var o=0;this.overlayManagementTable.forEach((function(t,e){t.isVisible&&++o}));var r=0,s=null,a=null;n.forEach((function(t){var n=e.overlayManagementTable.get(t.getName());n.isVisible&&(n.isAutoCloseableWhenOutfocus?t.changeZIndex(e.FOREGROUND_START_Z_INDEX+o--):n.isModal?t.changeZIndex(e.MODAL_START_Z_INDEX+o--):t.changeZIndex(e.DEFAULT_OVERLAY_START_Z_INDEX+o--),0===r||a.isActive()&&t===s.parentOverlay?t.activate():t.inactivate(n.isModal),s=n,a=t,++r)}))},t.prototype.activateTopOverlay=function(){var t,e=this,n=-1;this.overlays.forEach((function(i,o){e.overlayManagementTable.get(o).isVisible&&i.getZIndex()>n&&(n=i.getZIndex(),t=o)})),n>-1&&this.activateSpecificOverlay(t)},t.prototype.cancelAutoClosingOnlyOnce=function(){this.requestedAutoCloseCancelOnlyOnce=!0},t.instance=new t,t}(),K=function(){function t(){this.isVisible=!1,this.isModal=!1,this.isAutoCloseableWhenOutfocus=!1,this.parentOverlay=null}return t.prototype.reset=function(){return this.isVisible=!1,this.isModal=!1,this.isAutoCloseableWhenOutfocus=!1,this.parentOverlay=null,this},t}(),J=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{l(i.next(t))}catch(t){r(t)}}function a(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):new n((function(e){e(t.value)})).then(s,a)}l((i=i.apply(t,e||[])).next())}))},Q=function(t,e){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},$=function(){function t(t){this.moduleRouter=z.getInstance(),this.moduleManager=pt.getInstance(),this.overlayManager=q.getInstance(),this.adapter=t}return t.prototype.getCurrentOverlay=function(){for(var t=0,e=this.adapter.getHtmlComponent().getOwnerContainer();e.getOwner();)if(e=e.getOwner().getOwnerContainer(),t++>100)throw new d("コンテナの親子関係に循環が発生しています。");return this.overlayManager.findOverlayByContainer(e)},t.prototype.forward=function(t,e){return J(this,void 0,void 0,(function(){var n;return Q(this,(function(i){return n=t.split("::").length>1?t:this.adapter.getHtmlComponent().getOwnerContainer().getId()+"::"+t,[2,this.moduleRouter.forward(n,e)]}))}))},t.prototype.startExitProcess=function(t){this.adapter.getHtmlComponent().exit(t)},t.prototype.showWindow=function(t,e,n){return J(this,void 0,void 0,(function(){return Q(this,(function(i){switch(i.label){case 0:return[4,this.overlayManager.show(t,e,n)];case 1:return[2,i.sent()]}}))}))},t.prototype.showWindowAsModal=function(t,e,n){return J(this,void 0,void 0,(function(){return Q(this,(function(i){switch(i.label){case 0:return[4,this.overlayManager.showAsModal(t,e,n)];case 1:return[2,i.sent()]}}))}))},t.prototype.showContextMenu=function(t,e,n){return J(this,void 0,void 0,(function(){var i,o,r,s;return Q(this,(function(a){switch(a.label){case 0:return i={parent:this.getCurrentOverlay()},n?(o=n.getBoundingClientRect(),r=o.left,s=o.bottom,i.position={x:r,y:s},[4,this.overlayManager.show(t,e,i)]):[3,2];case 1:return[2,a.sent()];case 2:return[4,this.overlayManager.show(t,e,i)];case 3:return[2,a.sent()]}}))}))},t.prototype.showDrawer=function(t,e){return J(this,void 0,void 0,(function(){return Q(this,(function(n){switch(n.label){case 0:return[4,this.overlayManager.showAsModal(t,e)];case 1:return[2,n.sent()]}}))}))},t}(),tt=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{l(i.next(t))}catch(t){r(t)}}function a(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):new n((function(e){e(t.value)})).then(s,a)}l((i=i.apply(t,e||[])).next())}))},et=function(t,e){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},nt=new Map,it=function(){function t(){this.isModified=!1,this.moduleRouter=z.getInstance(),this.moduleManager=pt.getInstance(),this.overlayManager=q.getInstance(),this.exitCallbackReturnFunctionsObject={cancelExit:this.cancelExit.bind(this),continueExit:this.continueExit.bind(this)},this.navigation=new $(this)}return t.prototype.setHtmlComponent=function(t){this.htmlModule=t},t.prototype.getHtmlComponent=function(){return this.htmlModule},t.prototype.setCaption=function(t){this.htmlModule.setCaption(t)},t.prototype.sendMessage=function(t,e,n){return tt(this,void 0,void 0,(function(){return et(this,(function(i){return[2,this.moduleManager.dispatchMessage(t,e,n)]}))}))},t.prototype.triggerOnLoad=function(t){this.onLoad&&this.onLoad(t)},t.prototype.triggerOnInitialize=function(t){this.onInitialize&&this.onInitialize(t)},t.prototype.triggerOnShow=function(t,e){this.onShow&&this.onShow(t,e)},t.prototype.triggerOnHide=function(t){this.onHide&&this.onHide(t)},t.prototype.triggerOnExit=function(t){this.onExit?this.onExit(t,this.exitCallbackReturnFunctionsObject):this.continueExit(new y(t,!0))},t.prototype.triggerOnReceiveMessage=function(t,e){this.onMessageReceived&&this.onMessageReceived(t,this.returnMessageResponse.bind(this),e)},t.prototype.triggerOnSubContainerNavigated=function(t,e,n){return this.onSubContainerNavigated?this.onSubContainerNavigated(t,e,n):null},t.prototype.continueExit=function(t){this.htmlModule.continueExitProcess(t)},t.prototype.cancelExit=function(){this.htmlModule.cancelExitProcess()},t.prototype.returnMessageResponse=function(t){this.htmlModule.returnMessageResponse(t)},t}(),ot=window;ot.__HtmlModuleAdapter=it,ot.__registerHTMLComponentAdapter=function(t,e){nt.set(t,e)};var rt,st,at=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),lt=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{l(i.next(t))}catch(t){r(t)}}function a(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):new n((function(e){e(t.value)})).then(s,a)}l((i=i.apply(t,e||[])).next())}))},ct=function(t,e){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},ut=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return at(e,t),e.prototype.onCreate=function(){this.prototypeTemplateBegin="(function() {\n            var Com = function(moduleIndex) {\n                this.super = __HtmlModuleAdapter.prototype;\n                __HtmlModuleAdapter.call(this, moduleIndex);\n        ",this.prototypeTemplateEnd="   }\n            Object.setPrototypeOf(Com.prototype, __HtmlModuleAdapter.prototype);\n            __registerHTMLComponentAdapter("+this.moduleIndex+", new Com("+this.moduleIndex+"));\n         })();\n        "},e.prototype.loadSubContainerInfos=function(){for(var t,e=/<div .*?data-container-name[ =].*?>/g;t=e.exec(this.source);){var n=/id *= *["'](.+?)["']/.exec(t[0]),i=/data-container-name *= *["'](.*?)["']/.exec(t[0]),o=/data-container-type *= *["'](.*?)["']/.exec(t[0]);this.subContainerInfos.set(n[1],{name:i[1],type:o?o[1]:"",container:null})}},e.prototype.mount=function(t,e){return lt(this,void 0,void 0,(function(){var n,i,o,r=this;return ct(this,(function(s){switch(s.label){case 0:return this.isFetched?[3,2]:[4,this.fetch()];case 1:s.sent(),s.label=2;case 2:return n="_"+this.moduleIndex.toString()+"_",i=/\\:/g,this.source=this.source.replace(i,n),this.wrapperElement=document.createElement("div"),this.wrapperElement.id=n+"module",this.wrapperElement.className="itm_html_module",this.wrapperElement.style.position="absolute",this.wrapperElement.style.overflow="auto",this.wrapperElement.style.width="100%",this.wrapperElement.style.height="100%",this.wrapperElement.style.visibility="hidden",this.wrapperElement.innerHTML=this.source,e&&e.enableCssTransition&&(this.cssTransitionDriver=new D(this.wrapperElement),this.cssTransitionDriver.setCustomTransitionClasses(e.cssTransitionDriverClasses)),this.currentContainer=t(this.wrapperElement,this.name),[4,this.evalScripts()];case 3:return s.sent(),o=x.getInstance(),this.subContainerInfos.forEach((function(t,e){var s=e.replace(i,n),a=document.getElementById(s),l=r.name+"."+t.name;t.container=o.createContainer(l,t.type,a,r)})),this.isMounted=!0,this.htmlAdapter=nt.get(this.moduleIndex),this.htmlAdapter.setHtmlComponent(this),this.htmlAdapter.triggerOnLoad("name is "+this.name),[2,!0]}}))}))},e.prototype.evalScripts=function(){return lt(this,void 0,void 0,(function(){var t,e,n,i,o,r,s,l,c,u,h,d,p,f,y,v;return ct(this,(function(m){switch(m.label){case 0:t="",e="",n="",i="",o=new Array,r=this.wrapperElement.querySelectorAll("script"),s=0,m.label=1;case 1:return s<r.length?(l=r[s],c=l.dataset.scopeMode,(u=l.dataset.source)?[4,a.getInstance().fetch(u)]:[3,3]):[3,6];case 2:return t=m.sent(),[3,4];case 3:t=l.textContent,m.label=4;case 4:"native"===c?e+=t:c&&"prototype"!==c?"class"===c&&(i+=t):n+=t,o.push(l),m.label=5;case 5:return s++,[3,1];case 6:for((h=document.createElement("script")).textContent=e,this.wrapperElement.appendChild(h),i?((d=document.createElement("script")).textContent=i,this.wrapperElement.appendChild(d)):(p=document.createElement("script"),n=this.prototypeTemplateBegin+n+this.prototypeTemplateEnd,p.textContent=n,this.wrapperElement.appendChild(p)),f=0,y=o;f<y.length;f++)v=y[f],this.wrapperElement.removeChild(v);return[2]}}))}))},e.prototype.changeModuleCssPosition=function(t,e){this.wrapperElement.style.left=t,this.wrapperElement.style.top=e},e.prototype.changeModuleCssSize=function(t,e){this.wrapperElement.style.width=t,this.wrapperElement.style.height=e},e}(u),ht=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{l(i.next(t))}catch(t){r(t)}}function a(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):new n((function(e){e(t.value)})).then(s,a)}l((i=i.apply(t,e||[])).next())}))},dt=function(t,e){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};!function(t){t[t.Embedding=0]="Embedding",t[t.Window=1]="Window",t[t.ContextMenu=2]="ContextMenu",t[t.Drawer=3]="Drawer"}(rt||(rt={})),function(t){t[t.Native=0]="Native",t[t.Vue=1]="Vue",t[t.React=2]="React",t[t.SSRP=3]="SSRP"}(st||(st={}));var pt=function(){function t(){this.dependencyInfoMap=new Map,this.descriptions=[],this.modules=new Map}return t.getInstance=function(){return t.instance},t.prototype.register=function(t,e,n,i,o){this.registerDescription(t,e,rt.Embedding,n,i,o)},t.prototype.registerWindow=function(t,e,n,i){this.registerDescription(t,e,rt.Window,null,null,i).windowOptions=n},t.prototype.registerContextMenu=function(t,e,n,i){this.registerDescription(t,e,rt.ContextMenu,null,null,i).contextMenuOptions=n},t.prototype.registerDrawer=function(t,e,n,i){this.registerDescription(t,e,rt.Drawer,null,null,i).drawerOptions=n},t.prototype.registerDescription=function(t,e,n,i,o,r){var s=r||{},a={name:t,sourceUri:e,targetContainerId:i,displayMode:n,moduleType:void 0!==s.moduleType?s.moduleType:st.Native,isContainerDefault:o,lazyLoading:void 0!==s.lazyLoading&&s.lazyLoading,preloadSourceAtLazy:void 0===s.preloadSourceAtLazy||s.preloadSourceAtLazy};return this.descriptions.push(a),a},t.prototype.getModule=function(t){if(!this.modules.has(t))throw new d("指定されたモジュールが見つかりません。");return this.modules.get(t)},t.prototype.initialize=function(){return ht(this,void 0,void 0,(function(){var e,n,i,o,r,s=this;return dt(this,(function(a){switch(a.label){case 0:e=0,n=this.descriptions,a.label=1;case 1:if(!(e<n.length))return[3,5];if(i=n[e],o=null,i.moduleType!==st.Native&&i.moduleType)throw new d("不明な種類のコンポーネントが指定されました。");return o=new ut(i.name,i.sourceUri,t.instanceSequence++),this.modules.set(i.name,o),i.lazyLoading?[3,3]:[4,o.fetch()];case 2:a.sent(),a.label=3;case 3:this.dependencyInfoMap.set(i.name,new ft(i,o.getSubContainerNames())),a.label=4;case 4:return e++,[3,1];case 5:return r=new ft(null,[t.ROOT_NAME]),this.dependencyInfoMap.set(t.ROOT_NAME,r),this.dependencyInfoMap.forEach((function(e,n){if(e!==r){var i=t.ROOT_NAME,o=t.ROOT_NAME;if(e.moduleDescription.displayMode===rt.Embedding&&e.moduleDescription.targetContainerId){var a=e.moduleDescription.targetContainerId.split(".");2===a.length&&(i=a[0],o=a[1])}s.dependencyInfoMap.get(i).addSubModule(n,o)}})),[4,this.loadModuleRecursively(t.ROOT_NAME)];case 6:return a.sent(),[2,!0]}}))}))},t.prototype.loadModuleRecursively=function(t,e){return ht(this,void 0,void 0,(function(){var n,i,o,r,s,a,l,c,u,h,p;return dt(this,(function(f){switch(f.label){case 0:if(n=this.dependencyInfoMap.get(t),i=x.getInstance(),o=q.getInstance(),r=n.moduleDescription,n.isProcessed)throw new d("コンテナの循環参照を検出しました。");return n.isProcessed=!0,n.isRoot||r.lazyLoading&&!e?[3,6]:(s=r.displayMode,a=this.modules.get(r.name),s!==rt.Embedding?[3,4]:(l=i.getContainer(r.targetContainerId))?[4,l.addModule(a)]:[3,2]);case 1:return f.sent(),r.isContainerDefault&&l.setDefaultModule(a),[3,3];case 2:throw new d("ターゲットコンテナは存在しないか、ロードされていません。");case 3:return[3,6];case 4:switch(c=void 0,s){case rt.Window:c=o.createWindow(a.getName(),r.windowOptions);break;case rt.ContextMenu:c=o.createContextMenu(a.getName(),r.contextMenuOptions);break;case rt.Drawer:c=o.createDrawer(a.getName(),r.drawerOptions)}return[4,c.getContainer().addModule(a)];case 5:f.sent(),c.getContainer().setDefaultModule(a),f.label=6;case 6:u=0,h=n.subModuleNames,f.label=7;case 7:return u<h.length?(p=h[u],this.dependencyInfoMap.get(p).moduleDescription.lazyLoading?[3,9]:[4,this.loadModuleRecursively(p)]):[3,11];case 8:return f.sent(),[3,10];case 9:console.log(p+" is lazy load mode."),f.label=10;case 10:return u++,[3,7];case 11:return[2]}}))}))},t.prototype.dispatchMessage=function(t,e,n){return this.getModule(t).passMessage(e,n)},t.instance=new t,t.ROOT_NAME="root",t.instanceSequence=0,t}(),ft=function(){function t(t,e){this.subModuleNames=new Array,this.isProcessed=!1,this.moduleDescription=t,this.isRoot=null===t}return t.prototype.addSubModule=function(t,e){this.subModuleNames.push(t)},t}(),yt=function(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{l(i.next(t))}catch(t){r(t)}}function a(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){t.done?o(t.value):new n((function(e){e(t.value)})).then(s,a)}l((i=i.apply(t,e||[])).next())}))},vt=function(t,e){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},mt=function(){function t(t,e){this.cssUris=[],this.scriptUris=[],this.loadFinishResolver=null,this.currentCssLoadIndex=0,this.currentScriptLoadIndex=0,this.cssLoadIsComplete=!1,this.scriptLoadIsComplete=!1,this.loadedCss=new Set,this.loadedScript=new Set,this.cssUris=t,this.scriptUris=e}return t.prototype.load=function(){return yt(this,void 0,void 0,(function(){var t=this;return vt(this,(function(e){return[2,new Promise((function(e){t.loadFinishResolver=e,t.loadCss(),t.loadScript()}))]}))}))},t.prototype.onCompleteHandler=function(){this.cssLoadIsComplete&&this.scriptLoadIsComplete&&this.loadFinishResolver()},t.prototype.loadCss=function(){var t,e=this,n=this.cssUris[this.currentCssLoadIndex],i=this.loadedCss.has(n)||0===this.cssUris.length;if(!i){var o=document.getElementsByTagName("head")[0];(t=document.createElement("link")).rel="stylesheet",t.type="text/css",t.href=n+"?ver="+(new Date).getTime(),o.insertBefore(t,o.firstChild),this.loadedScript.add(n)}++this.currentCssLoadIndex<this.cssUris.length?i?this.loadCss():t.onload=this.loadCss.bind(this):i?(this.cssLoadIsComplete=!0,this.onCompleteHandler()):t.onload=function(){e.cssLoadIsComplete=!0,e.onCompleteHandler()}},t.prototype.loadScript=function(){var t,e=this,n=this.scriptUris[this.currentScriptLoadIndex],i=this.loadedScript.has(n)||0===this.scriptUris.length;i||((t=document.createElement("script")).src=n+"?ver="+(new Date).getTime(),document.body.appendChild(t),this.loadedScript.add(n)),++this.currentScriptLoadIndex<this.scriptUris.length?i?this.loadScript():t.onload=this.loadScript.bind(this):i?(this.scriptLoadIsComplete=!0,this.onCompleteHandler()):t.onload=function(){e.scriptLoadIsComplete=!0,e.onCompleteHandler()}},t}(),wt=function(){function t(){this.moduleManager=pt.getInstance(),this.cssUris=new Array,this.scriptUris=new Array}return t.getInstance=function(){return t.instance},t.prototype.setAppRootId=function(t){this.appRootId=t},t.prototype.setSourceVersion=function(t){a.getInstance().setSourceVersion(t)},t.prototype.getAppRootId=function(){return this.appRootId},t.prototype.getSharedCssScriptLoader=function(){return new mt(this.cssUris,this.scriptUris)},t.prototype.register=function(t,e,n,i,o){this.moduleManager.register(t,e,n,i,o)},t.prototype.registerWindow=function(t,e,n,i){this.moduleManager.registerWindow(t,e,n,i)},t.prototype.registerContextMenu=function(t,e,n,i){this.moduleManager.registerContextMenu(t,e,n,i)},t.prototype.registerDrawer=function(t,e,n,i){this.moduleManager.registerDrawer(t,e,n,i)},t.prototype.loadSharedCss=function(t){this.cssUris.push(t)},t.prototype.loadSharedScript=function(t){this.scriptUris.push(t)},t.instance=new t,t}();document.documentMode&&(W.isMsIE=!0),window.addEventListener("mousemove",(function(t){W.currentMouseClientX=t.clientX,W.currentMouseClientY=t.clientY}));var gt=!1,Et=!1,bt=function(){console.log("bootloader is called.");var t=window;if(t.configurer){var e=wt.getInstance();t.configurer(e),e.getSharedCssScriptLoader().load().then((function(){console.log("css and scripts is loaded."),gt=!0,Mt()}));var n=document.querySelector("#"+e.getAppRootId());if(!n)throw new d("有効なルートコンテナが設定されていません。");x.getInstance().setRootElement(n),q.getInstance().setViewPortElement(n),pt.getInstance().initialize().then((function(){console.log("moduleManager is initialized."),Et=!0,Mt()}))}else console.log("configurerが未定義です。")},Mt=function(){var t;gt&&Et&&(x.getInstance().initializeRootContainer(),W.isMsIE?(t=document.createEvent("Event")).initEvent("resize",!0,!1):t=new Event("resize"),window.dispatchEvent(t))};"complete"===document.readyState?bt():window.addEventListener("load",(function(){bt()}))}]);